-- Projet de fin d'Ã©tudes : RISC-V
-- ECE Paris / SECAPEM
-- Data Memory VHDL

-- LIBRARIES
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

-- ENTITY
entity DataMemory is
	port (
		-- INPUTS
		DMclock		: in std_logic;
		DMreset		: in std_logic;
		DMstore		: in std_logic;
		DMload		: in std_logic;
		DMaddr		: in std_logic_vector(31 downto 0);
		DMin			: in std_logic_vector(31 downto 0);
		DMfunct3		: in std_logic_vector(2 downto 0);
		-- OUTPUTS
		DMout			: out std_logic_vector(31 downto 0)
	);
end entity;

-- ARCHITECTURE
architecture archi of DataMemory is
	type mem is array(0 to 4095) of std_logic_vector(7 downto 0);
	signal SigDMmemory : mem :=(
		x"6f",x"00",x"c0",x"00",  x"13",x"00",x"00",x"00",  x"13",x"00",x"00",x"00",  x"37",x"19",x"00",x"00",  x"13",x"09",x"09",x"ff",  x"b7",x"19",x"00",x"00",  x"93",x"89",x"49",x"ff",  x"37",x"1a",x"11",x"11",
		x"13",x"0a",x"1a",x"11",  x"b7",x"2a",x"22",x"22",  x"93",x"8a",x"2a",x"22",  x"37",x"3b",x"33",x"33",  x"13",x"0b",x"3b",x"33",  x"b7",x"4b",x"44",x"44",  x"93",x"8b",x"4b",x"44",  x"37",x"5c",x"55",x"55",
		x"13",x"0c",x"5c",x"55",  x"b7",x"6c",x"66",x"66",  x"93",x"8c",x"6c",x"66",  x"23",x"00",x"49",x"01",  x"23",x"80",x"59",x"01",  x"23",x"1e",x"69",x"ff",  x"23",x"92",x"79",x"01",  x"23",x"2c",x"89",x"ff",
		x"23",x"a4",x"99",x"01",  x"13",x"00",x"00",x"00",  x"13",x"00",x"00",x"00",  x"13",x"00",x"00",x"00",  x"83",x"42",x"09",x"00",  x"03",x"03",x"c9",x"ff",  x"83",x"13",x"89",x"ff",  x"03",x"d4",x"49",x"00",
		x"83",x"a4",x"89",x"00",  x"93",x"00",x"80",x"00",  x"67",x"80",x"00",x"00",  x"13",x"05",x"c5",x"ff",  x"13",x"75",x"f5",x"0f",  x"93",x"07",x"80",x"01",  x"93",x"06",x"00",x"00",  x"93",x"08",x"f0",x"0f",
		x"13",x"08",x"80",x"0f",  x"13",x"17",x"85",x"01",  x"13",x"57",x"87",x"41",  x"63",x"4e",x"07",x"02",  x"63",x"5c",x"c7",x"02",  x"33",x"87",x"e5",x"00",  x"03",x"47",x"07",x"00",  x"33",x"17",x"f7",x"00",
		x"93",x"87",x"87",x"ff",  x"13",x"05",x"15",x"00",  x"93",x"f7",x"f7",x"0f",  x"b3",x"e6",x"e6",x"00",  x"13",x"75",x"f5",x"0f",  x"e3",x"98",x"07",x"fd",  x"b7",x"07",x"00",x"80",  x"23",x"a4",x"07",x"00",
		x"23",x"a2",x"d7",x"00",  x"67",x"80",x"00",x"00",  x"33",x"97",x"f8",x"00",  x"6f",x"f0",x"5f",x"fd",  x"b7",x"d7",x"c0",x"c6",  x"13",x"01",x"01",x"fe",  x"93",x"87",x"c7",x"e8",  x"23",x"24",x"f1",x"00",
		x"b7",x"87",x"c6",x"86",  x"93",x"87",x"f7",x"6b",  x"93",x"05",x"81",x"00",  x"13",x"06",x"80",x"00",  x"13",x"05",x"10",x"00",  x"23",x"2e",x"11",x"00",  x"23",x"26",x"f1",x"00",  x"ef",x"f0",x"1f",x"f7",
		x"83",x"20",x"c1",x"01",  x"13",x"01",x"01",x"02",  x"67",x"80",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",
		x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00",  x"00",x"00",x"00",x"00"
	);
	
	signal SigDMaddr00 : integer;
	signal SigDMaddr08 : integer;
	signal SigDMaddr16 : integer;
	signal SigDMaddr24 : integer;
	signal intAddr : std_logic_vector(13 downto 0);
	signal cs : std_logic;
begin
	-- BEGIN
	
	intAddr <= DMaddr(13 downto 0);
	cs <= not DMaddr(31);
	
	-- useful adresses used to store or load
	SigDMaddr00 <= to_integer(unsigned(intAddr)) when (cs='1' and (DMload = '1' OR DMstore = '1')) else
						0;
	SigDMaddr08 <= to_integer(unsigned(intAddr)) + 1 when (cs='1' and (DMload = '1' OR DMstore = '1')) else
						0;
	SigDMaddr16 <= to_integer(unsigned(intAddr)) + 2 when (cs='1' and (DMload = '1' OR DMstore = '1')) else
						0;
	SigDMaddr24 <= to_integer(unsigned(intAddr)) + 3 when (cs='1' and (DMload = '1' OR DMstore = '1')) else
						0;
	
	-- store for synchronous data memory
	p2 : process(DMclock, DMreset)
	begin
		if(rising_edge(DMclock)) then
			if(DMstore = '1' and cs='1') then
				if(DMfunct3 = "000") then
					SigDMmemory(SigDMaddr00) <= DMin(7 downto 0);
				elsif(DMfunct3 = "001") then
					SigDMmemory(SigDMaddr00) <= DMin(7 downto 0);
					SigDMmemory(SigDMaddr08) <= DMin(15 downto 8);
					
				elsif(DMfunct3 = "010") then
					SigDMmemory(SigDMaddr00) <= DMin(7 downto 0);
					SigDMmemory(SigDMaddr08) <= DMin(15 downto 8);
					SigDMmemory(SigDMaddr16) <= DMin(23 downto 16);
					SigDMmemory(SigDMaddr24) <= DMin(31 downto 24);
				end if;
			end if;
		end if;
	end process;
	
	
	-- load for asynchronous data memory
	DMout(7 downto 0) <= SigDMmemory(SigDMaddr00) when (DMload = '1' and SigDMaddr00<4095) else
								(others => '0');
								
	DMout(15 downto 8)<= SigDMmemory(SigDMaddr08) when (DMload = '1' AND (DMfunct3 = "001" OR DMfunct3 = "010" OR DMfunct3 = "101") and SigDMaddr00<4095) else
								(others => '1') when ( SigDMaddr00<4095 and DMload = '1' AND (DMfunct3 = "000" AND ((SigDMmemory(SigDMaddr00) AND "10000000") = "10000000"))) else
								(others => '0');
	
	DMout(23 downto 16)<=SigDMmemory(SigDMaddr16) when (SigDMaddr00<4095 and DMload = '1' AND (DMfunct3 = "010")) else
								(others => '1') when (SigDMaddr00<4095 and DMload = '1' AND ((DMfunct3 = "000" AND ((SigDMmemory(SigDMaddr00) AND "10000000") = "10000000")) OR (DMfunct3 = "001" AND ((SigDMmemory(SigDMaddr08) AND "10000000") = "10000000")))) else
								(others => '0');
	
	DMout(31 downto 24)<=SigDMmemory(SigDMaddr24) when (SigDMaddr00<4095 and DMload = '1' AND (DMfunct3 = "010")) else
								(others => '1') when (SigDMaddr00<4095 and DMload = '1' AND ((DMfunct3 = "000" AND ((SigDMmemory(SigDMaddr00) AND "10000000") = "10000000")) OR (DMfunct3 = "001" AND ((SigDMmemory(SigDMaddr08) AND "10000000") = "10000000")))) else
								(others => '0');
	
	-- END
end archi;
-- END FILE